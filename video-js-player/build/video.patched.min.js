/*!
Video.js - HTML5 Video Player
Version 3.1.0

LGPL v3 LICENSE INFO
This file is part of Video.js. Copyright 2011 Zencoder, Inc.
Necessary patched by Kevin Tong (logicmd AT gmail.com) 

Video.js is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Video.js is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with Video.js.  If not, see <http://www.gnu.org/licenses/>.
*/(function(j,h){function n(){return!0}function o(){return!1}var f=j.document;f.createElement("video");f.createElement("audio");var k=function(a,c,e){if("string"==typeof a){0===a.indexOf("#")&&(a=a.slice(1));if(b.players[a])return b.players[a];a=b.el(a)}if(!a||!a.nodeName)throw new TypeError("The element or ID supplied is not valid. (VideoJS)");return a.player||new b.Player(a,c,e)},b=k;k.players={};k.options={techOrder:["html5","flash"],html5:{},flash:{swf:"VideoJS.anaglyph.swf"},width:"auto",height:"auto",
defaultVolume:0,components:{poster:{},loadingSpinner:{},bigPlayButton:{},controlBar:{},subtitlesDisplay:{}}};b.options.flash.swf="VideoJS.anaglyph.swf";b.autoSetup=function(){var a,c,e=f.getElementsByTagName("video");if(e&&0<e.length)for(var d=0,g=e.length;d<g;d++)if((c=e[d])&&c.getAttribute)c.player===h&&(a=c.getAttribute("data-setup"),null!==a&&(a=m.parse(a||"{}"),b(c,a)));else{b.autoSetupTimeout(1);break}else b.windowLoaded||b.autoSetupTimeout(1)};b.autoSetupTimeout=function(a){setTimeout(b.autoSetup,
a)};b.merge=function(a,c,b){c||(c={});for(var d in c)if(c.hasOwnProperty(d)&&(!b||!a.hasOwnProperty(d)))a[d]=c[d];return a};b.extend=function(a){this.merge(this,a,!0)};b.extend({tech:{},controlSets:{},isIE:function(){return!+"\u000b1"},isFF:function(){return!!b.ua.match("Firefox")},isIPad:function(){return null!==navigator.userAgent.match(/iPad/i)},isIPhone:function(){return null!==navigator.userAgent.match(/iPhone/i)},isIOS:function(){return k.isIPhone()||k.isIPad()},iOSVersion:function(){var a=
navigator.userAgent.match(/OS (\d+)_/i);if(a&&a[1])return a[1]},isAndroid:function(){return null!==navigator.userAgent.match(/Android.*AppleWebKit/i)},androidVersion:function(){var a=navigator.userAgent.match(/Android (\d+)\./i);if(a&&a[1])return a[1]},testVid:f.createElement("video"),ua:navigator.userAgent,support:{},each:function(a,c){if(a&&0!==a.length)for(var b=0,d=a.length;b<d;b++)c.call(this,a[b],b)},eachProp:function(a,c){if(a)for(var b in a)a.hasOwnProperty(b)&&c.call(this,b,a[b])},el:function(a){return f.getElementById(a)},
createElement:function(a,c){var b=f.createElement(a),d;for(d in c)c.hasOwnProperty(d)&&(-1!==d.indexOf("-")?b.setAttribute(d,c[d]):b[d]=c[d]);return b},insertFirst:function(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)},addClass:function(a,b){if(-1==(" "+a.className+" ").indexOf(" "+b+" "))a.className=""===a.className?b:a.className+" "+b},removeClass:function(a,b){if(-1!=a.className.indexOf(b)){var e=a.className.split(" ");e.splice(e.indexOf(b),1);a.className=e.join(" ")}},remove:function(a,
b){if(b){var e=b.indexOf(a);if(-1!=e)return b.splice(e,1)}},blockTextSelection:function(){f.body.focus();f.onselectstart=function(){return!1}},unblockTextSelection:function(){f.onselectstart=function(){return!0}},formatTime:function(a,b){var b=b||a,e=Math.floor(a%60),d=Math.floor(a/60%60),g=Math.floor(a/3600),f=Math.floor(b/60%60),i=Math.floor(b/3600),g=0<g||0<i?g+":":"";return g+(((g||10<=f)&&10>d?"0"+d:d)+":")+(10>e?"0"+e:e)},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},getRelativePosition:function(a,
c){return Math.max(0,Math.min(1,(a-b.findPosX(c))/c.offsetWidth))},getComputedStyleValue:function(a,b){return j.getComputedStyle(a,null).getPropertyValue(b)},trim:function(a){return a.toString().replace(/^\s+/,"").replace(/\s+$/,"")},round:function(a,b){b||(b=0);return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},isEmpty:function(a){for(var b in a)return!1;return!0},createTimeRange:function(a,b){return{length:1,start:function(){return a},end:function(){return b}}},cache:{},guid:1,expando:"vdata"+
(new Date).getTime(),getData:function(a){var c=a[b.expando];c||(c=a[b.expando]=b.guid++,b.cache[c]={});return b.cache[c]},removeData:function(a){var c=a[b.expando];if(c){delete b.cache[c];try{delete a[b.expando]}catch(e){a.removeAttribute?a.removeAttribute(b.expando):a[b.expando]=null}}},proxy:function(a,c){if(!c.guid)c.guid=b.guid++;var e=function(){return c.apply(a,arguments)};e.guid=c.guid;return e},get:function(a,c,e){var d=0==a.indexOf("file:")||0==j.location.href.indexOf("file:")&&-1==a.indexOf("http:");
"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}throw Error("This browser does not support XMLHttpRequest.");});var g=new XMLHttpRequest;try{g.open("GET",a)}catch(f){return b.log("VideoJS XMLHttpRequest (open)",f),!1}g.onreadystatechange=b.proxy(this,function(){4==g.readyState&&(200==g.status||d&&0==g.status?
c(g.responseText):e&&e())});try{g.send()}catch(i){b.log("VideoJS XMLHttpRequest (send)",i),e&&e(i)}},setLocalStorage:function(a,c){var e=e||!1;if(e)try{e[a]=c}catch(d){22==d.code||1014==d.code?b.log("LocalStorage Full (VideoJS)",d):b.log("LocalStorage Error (VideoJS)",d)}}});b.log=function(){b.log.history=b.log.history||[];b.log.history.push(arguments);if(j.console){arguments.callee=arguments.callee.caller;var a=[].slice.call(arguments);"object"===typeof console.log?b.log.apply.call(console.log,console,
a):console.log.apply(console,a)}};var p;try{console.log(),p=j.console}catch(q){p=j.console={}}(function(a){function b(){}for(var e="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;d=e.pop();)a[d]=a[d]||b})(p);b.findPosX="getBoundingClientRect"in f.documentElement?function(a){var b;try{b=a.getBoundingClientRect()}catch(e){}if(!b)return 0;a=f.body;return b.left+(j.pageXOffset||a.scrollLeft)-(f.documentElement.clientLeft||
a.clientLeft||0)}:function(a){for(var b=a.offsetLeft;a=obj.offsetParent;)a.className.indexOf("video-js"),b+=a.offsetLeft;return b};(function(){var a=!1,c=/xyz/.test(function(){})?/\b_super\b/:/.*/;b.Class=function(){};b.Class.extend=function(b){function d(){if(!a&&this.init)return this.init.apply(this,arguments);if(!a)return arguments.callee.prototype.init()}var g=this.prototype;a=!0;var f=new this;a=!1;for(var i in b)f[i]="function"==typeof b[i]&&"function"==typeof g[i]&&c.test(b[i])?function(a,
b){return function(){var c=this._super;this._super=g[a];var d=b.apply(this,arguments);this._super=c;return d}}(i,b[i]):b[i];d.prototype=f;d.constructor=d;d.extend=arguments.callee;return d}})();b.Component=b.Class.extend({init:function(a,c){this.player=a;c=this.options=b.merge(this.options||{},c);this.el=c.el?c.el:this.createElement();this.initComponents()},destroy:function(){},createElement:function(a,c){return b.createElement(a||"div",c)},buildCSSClass:function(){return""},initComponents:function(){var a=
this.options;a&&a.components&&this.eachProp(a.components,function(a,b){var d=this.proxy(function(){this.addComponent(a,b)});if(b.loadEvent)this.one(b.loadEvent,d);else d()})},addComponent:function(a,c){var e,c=c||{};e=c.componentClass||b.capitalize(a);e=new b[e](this.player||this,c);this.el.appendChild(e.el);this[a]=e},show:function(){this.el.style.display="block"},hide:function(){this.el.style.display="none"},fadeIn:function(){this.removeClass("vjs-fade-out");this.addClass("vjs-fade-in")},fadeOut:function(){this.removeClass("vjs-fade-in");
this.addClass("vjs-fade-out")},addClass:function(a){b.addClass(this.el,a)},removeClass:function(a){b.removeClass(this.el,a)},addEvent:function(a,c){return b.addEvent(this.el,a,b.proxy(this,c))},removeEvent:function(a,c){return b.removeEvent(this.el,a,c)},triggerEvent:function(a,c){return b.triggerEvent(this.el,a,c)},one:function(a,c){b.one.call(this,this.el,a,c)},ready:function(a){if(!a)return this;if(this.isReady)a.call(this);else{if(this.readyQueue===h)this.readyQueue=[];this.readyQueue.push(a)}return this},
triggerReady:function(){this.isReady=!0;if(this.readyQueue&&0<this.readyQueue.length)this.each(this.readyQueue,function(a){a.call(this)}),this.readyQueue=[]},each:function(a,c){b.each.call(this,a,c)},eachProp:function(a,c){b.eachProp.call(this,a,c)},extend:function(a){b.merge(this,a)},proxy:function(a){return b.proxy(this,a)}});b.Control=b.Component.extend({buildCSSClass:function(){return"vjs-control "+this._super()}});b.Button=b.Control.extend({init:function(a,b){this._super(a,b);this.addEvent("click",
this.onClick);this.addEvent("focus",this.onFocus);this.addEvent("blur",this.onBlur)},createElement:function(a,c){c=b.merge({className:this.buildCSSClass(),innerHTML:'<div><span class="vjs-control-text">'+(this.buttonText||"Need Text")+"</span></div>",role:"button",tabIndex:0},c);return this._super(a,c)},onClick:function(){},onFocus:function(){b.addEvent(f,"keyup",b.proxy(this,this.onKeyPress))},onKeyPress:function(a){if(32==a.which||13==a.which)a.preventDefault(),this.onClick()},onBlur:function(){b.removeEvent(f,
"keyup",b.proxy(this,this.onKeyPress))}});b.PlayButton=b.Button.extend({buttonText:"Play",buildCSSClass:function(){return"vjs-play-button "+this._super()},onClick:function(){this.player.play()}});b.PauseButton=b.Button.extend({buttonText:"Pause",buildCSSClass:function(){return"vjs-pause-button "+this._super()},onClick:function(){this.player.pause()}});b.PlayToggle=b.Button.extend({buttonText:"Play",init:function(a,c){this._super(a,c);a.addEvent("play",b.proxy(this,this.onPlay));a.addEvent("pause",
b.proxy(this,this.onPause))},buildCSSClass:function(){return"vjs-play-control "+this._super()},onClick:function(){this.player.paused()?this.player.play():this.player.pause()},onPlay:function(){b.removeClass(this.el,"vjs-paused");b.addClass(this.el,"vjs-playing")},onPause:function(){b.removeClass(this.el,"vjs-playing");b.addClass(this.el,"vjs-paused")}});b.FullscreenToggle=b.Button.extend({buttonText:"Fullscreen",buildCSSClass:function(){return"vjs-fullscreen-control "+this._super()},onClick:function(){this.player.isFullScreen?
this.player.cancelFullScreen():this.player.requestFullScreen()}});b.BigPlayButton=b.Button.extend({init:function(a,c){this._super(a,c);a.addEvent("play",b.proxy(this,this.hide));a.addEvent("ended",b.proxy(this,this.show))},createElement:function(){return this._super("div",{className:"vjs-big-play-button",innerHTML:"<span></span>"})},onClick:function(){this.player.currentTime()&&this.player.currentTime(0);this.player.play()}});b.LoadingSpinner=b.Component.extend({init:function(a,c){this._super(a,c);
a.addEvent("canplay",b.proxy(this,this.hide));a.addEvent("canplaythrough",b.proxy(this,this.hide));a.addEvent("playing",b.proxy(this,this.hide));a.addEvent("seeking",b.proxy(this,this.show));a.addEvent("error",b.proxy(this,this.show));a.addEvent("waiting",b.proxy(this,this.show))},createElement:function(){var a,b;"string"==typeof this.player.el.style.WebkitBorderRadius||"string"==typeof this.player.el.style.MozBorderRadius||"string"==typeof this.player.el.style.KhtmlBorderRadius||"string"==typeof this.player.el.style.borderRadius?
(a="vjs-loading-spinner",b="<div class='ball1'></div><div class='ball2'></div><div class='ball3'></div><div class='ball4'></div><div class='ball5'></div><div class='ball6'></div><div class='ball7'></div><div class='ball8'></div>"):(a="vjs-loading-spinner-fallback",b="");return this._super("div",{className:a,innerHTML:b})}});b.ControlBar=b.Component.extend({options:{loadEvent:"play",components:{playToggle:{},fullscreenToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},
progressControl:{},volumeControl:{},muteToggle:{}}},init:function(a,b){this._super(a,b);a.addEvent("play",this.proxy(function(){this.fadeIn();this.player.addEvent("mouseover",this.proxy(this.fadeIn));this.player.addEvent("mouseout",this.proxy(this.fadeOut));var a=f.getElementById("display");a.addEventListener("mouseover",this.proxy(this.fadeIn),!1);a.addEventListener("mouseout",this.proxy(this.fadeOut),!1)}))},createElement:function(){return b.createElement("div",{className:"vjs-controls"})},fadeIn:function(){this._super();
this.player.triggerEvent("controlsvisible")},fadeOut:function(){this._super();this.player.triggerEvent("controlshidden")}});b.CurrentTimeDisplay=b.Component.extend({init:function(a,c){this._super(a,c);a.addEvent("timeupdate",b.proxy(this,this.updateContent))},createElement:function(){var a=this._super("div",{className:"vjs-current-time vjs-time-controls vjs-control"});this.content=b.createElement("div",{className:"vjs-current-time-display",innerHTML:"0:00"});a.appendChild(b.createElement("div").appendChild(this.content));
return a},updateContent:function(){var a=this.player.scrubbing?this.player.values.currentTime:this.player.currentTime();this.content.innerHTML=b.formatTime(a,this.player.duration())}});b.DurationDisplay=b.Component.extend({init:function(a,c){this._super(a,c);a.addEvent("timeupdate",b.proxy(this,this.updateContent))},createElement:function(){var a=this._super("div",{className:"vjs-duration vjs-time-controls vjs-control"});this.content=b.createElement("div",{className:"vjs-duration-display",innerHTML:"0:00"});
a.appendChild(b.createElement("div").appendChild(this.content));return a},updateContent:function(){if(this.player.duration())this.content.innerHTML=b.formatTime(this.player.duration())}});b.TimeDivider=b.Component.extend({createElement:function(){return this._super("div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})}});b.RemainingTimeDisplay=b.Component.extend({init:function(a,c){this._super(a,c);a.addEvent("timeupdate",b.proxy(this,this.updateContent))},createElement:function(){var a=
this._super("div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});this.content=b.createElement("div",{className:"vjs-remaining-time-display",innerHTML:"-0:00"});a.appendChild(b.createElement("div").appendChild(this.content));return a},updateContent:function(){if(this.player.duration())this.content.innerHTML="-"+b.formatTime(this.player.remainingTime())}});b.Slider=b.Component.extend({init:function(a,c){this._super(a,c);a.addEvent(this.playerEvent,b.proxy(this,this.update));this.addEvent("mousedown",
this.onMouseDown);this.addEvent("focus",this.onFocus);this.addEvent("blur",this.onBlur);this.player.addEvent("controlsvisible",this.proxy(this.update));this.update()},createElement:function(a,c){c=b.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},c);return this._super(a,c)},onMouseDown:function(a){a.preventDefault();b.blockTextSelection();b.addEvent(f,"mousemove",b.proxy(this,this.onMouseMove));b.addEvent(f,"mouseup",b.proxy(this,this.onMouseUp));this.onMouseMove(a)},
onMouseUp:function(){b.unblockTextSelection();b.removeEvent(f,"mousemove",this.onMouseMove,!1);b.removeEvent(f,"mouseup",this.onMouseUp,!1);this.update()},update:function(){var a,c=this.getPercent();handle=this.handle;bar=this.bar;isNaN(c)&&(c=0);a=c;if(handle){a=this.el.offsetWidth;var e=handle.el.offsetWidth;a=e?e/a:0;adjustedProgress=c*(1-a);a=adjustedProgress+a/2;handle.el.style.left=b.round(100*adjustedProgress,2)+"%"}bar.el.style.width=b.round(100*a,2)+"%"},calculateDistance:function(a){var c=
this.el,e=b.findPosX(c),c=c.offsetWidth,d=this.handle;if(d)d=d.el.offsetWidth,e+=d/2,c-=d;return Math.max(0,Math.min(1,(a.pageX-e)/c))},onFocus:function(){b.addEvent(f,"keyup",b.proxy(this,this.onKeyPress))},onKeyPress:function(a){37==a.which?(a.preventDefault(),this.stepBack()):39==a.which&&(a.preventDefault(),this.stepForward())},onBlur:function(){b.removeEvent(f,"keyup",b.proxy(this,this.onKeyPress))}});b.ProgressControl=b.Component.extend({options:{components:{seekBar:{}}},createElement:function(){return this._super("div",
{className:"vjs-progress-control vjs-control"})}});b.SeekBar=b.Slider.extend({options:{components:{loadProgressBar:{},bar:{componentClass:"PlayProgressBar"},handle:{componentClass:"SeekHandle"}}},playerEvent:"timeupdate",init:function(a,b){this._super(a,b)},createElement:function(){return this._super("div",{className:"vjs-progress-holder"})},getPercent:function(){return this.player.currentTime()/this.player.duration()},onMouseDown:function(a){this._super(a);this.player.scrubbing=!0;this.videoWasPlaying=
!this.player.paused();this.player.pause()},onMouseMove:function(a){a=this.calculateDistance(a)*this.player.duration();a==this.player.duration()&&(a-=0.1);this.player.currentTime(a)},onMouseUp:function(a){this._super(a);this.player.scrubbing=!1;this.videoWasPlaying&&this.player.play()},stepForward:function(){this.player.currentTime(this.player.currentTime()+1)},stepBack:function(){this.player.currentTime(this.player.currentTime()-1)}});b.LoadProgressBar=b.Component.extend({init:function(a,c){this._super(a,
c);a.addEvent("progress",b.proxy(this,this.update))},createElement:function(){return this._super("div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'})},update:function(){if(this.el.style)this.el.style.width=b.round(100*this.player.bufferedPercent(),2)+"%"}});b.PlayProgressBar=b.Component.extend({createElement:function(){return this._super("div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'})}});b.SeekHandle=
b.Component.extend({createElement:function(){return this._super("div",{className:"vjs-seek-handle",innerHTML:'<span class="vjs-control-text">00:00</span>'})}});b.VolumeControl=b.Component.extend({options:{components:{volumeBar:{}}},createElement:function(){return this._super("div",{className:"vjs-volume-control vjs-control"})}});b.VolumeBar=b.Slider.extend({options:{components:{bar:{componentClass:"VolumeLevel"},handle:{componentClass:"VolumeHandle"}}},playerEvent:"volumechange",createElement:function(){return this._super("div",
{className:"vjs-volume-bar"})},onMouseMove:function(a){this.player.volume(this.calculateDistance(a))},getPercent:function(){return this.player.volume()},stepForward:function(){this.player.volume(this.player.volume()+0.1)},stepBack:function(){this.player.volume(this.player.volume()-0.1)}});b.VolumeLevel=b.Component.extend({createElement:function(){return this._super("div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})}});b.VolumeHandle=b.Component.extend({createElement:function(){return this._super("div",
{className:"vjs-volume-handle",innerHTML:'<span class="vjs-control-text"></span>'})}});b.MuteToggle=b.Button.extend({init:function(a,c){this._super(a,c);a.addEvent("volumechange",b.proxy(this,this.update))},createElement:function(){return this._super("div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})},onClick:function(){this.player.muted(this.player.muted()?!1:!0)},update:function(){var a=this.player.volume(),c=3;0==a||this.player.muted()?
c=0:0.33>a?c=1:0.67>a&&(c=2);b.each.call(this,[0,1,2,3],function(a){b.removeClass(this.el,"vjs-vol-"+a)});b.addClass(this.el,"vjs-vol-"+c)}});b.Poster=b.Button.extend({init:function(a,c){this._super(a,c);this.player.options.poster||this.hide();a.addEvent("play",b.proxy(this,this.hide))},createElement:function(){return b.createElement("img",{className:"vjs-poster",src:this.player.options.poster,tabIndex:-1})},onClick:function(){this.player.play()}});b.TextTrackDisplay=b.Component.extend({init:function(a,
c){this._super(a,c);a.addEvent(this.trackType+"update",b.proxy(this,this.update))},createElement:function(){return this._super("div",{className:"vjs-"+this.trackType})},update:function(){this.el.innerHTML=this.player.textTrackValue(this.trackType)}});b.SubtitlesDisplay=b.TextTrackDisplay.extend({trackType:"subtitles"});b.CaptionsDisplay=b.TextTrackDisplay.extend({trackType:"captions"});b.ChaptersDisplay=b.TextTrackDisplay.extend({trackType:"chapters"});b.DescriptionsDisplay=b.TextTrackDisplay.extend({trackType:"descriptions"});
if(!Array.prototype.indexOf)Array.prototype.indexOf=function(a){if(void 0===this||null===this)throw new TypeError;var b=Object(this),e=b.length>>>0;if(0===e)return-1;var d=0;0<arguments.length&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(0<d||-1)*Math.floor(Math.abs(d))));if(d>=e)return-1;for(d=0<=d?d:Math.max(e-Math.abs(d),0);d<e;d++)if(d in b&&b[d]===a)return d;return-1};b.extend({addEvent:function(a,c,e){var d=b.getData(a),g;if(d&&!d.handler)d.handler=function(c){var c=b.fixEvent(c),
d=b.getData(a).events[c.type];if(d){var e=[];b.each(d,function(a,b){e[b]=a});for(var d=0,g=e.length;d<g;d++)e[d].call(a,c)}};if(!d.events)d.events={};g=d.events[c];g||(g=d.events[c]=[],f.addEventListener?a.addEventListener(c,d.handler,!1):f.attachEvent&&a.attachEvent("on"+c,d.handler));if(!e.guid)e.guid=b.guid++;g.push(e)},removeEvent:function(a,c,e){var d=b.getData(a);if(d.events)if(c){if(d=d.events[c]){if(e&&e.guid)for(var g=0;g<d.length;g++)d[g].guid===e.guid&&d.splice(g--,1);b.cleanUpEvents(a,
c)}}else for(c in d.events)b.cleanUpEvents(a,c)},cleanUpEvents:function(a,c){var e=b.getData(a);0===e.events[c].length&&(delete e.events[c],f.removeEventListener?a.removeEventListener(c,e.handler,!1):f.detachEvent&&a.detachEvent("on"+c,e.handler));b.isEmpty(e.events)&&(delete e.events,delete e.handler);b.isEmpty(e)&&b.removeData(a)},fixEvent:function(a){if(a[b.expando])return a;for(var c=a,a=new b.Event(c),e=b.Event.props.length,d;e;)d=b.Event.props[--e],a[d]=c[d];if(!a.target)a.target=a.srcElement||
f;if(3===a.target.nodeType)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;if(null==a.pageX&&null!=a.clientX)e=a.target.ownerDocument||f,c=e.documentElement,e=e.body,a.pageX=a.clientX+(c&&c.scrollLeft||e&&e.scrollLeft||0)-(c&&c.clientLeft||e&&e.clientLeft||0),a.pageY=a.clientY+(c&&c.scrollTop||e&&e.scrollTop||0)-(c&&c.clientTop||e&&e.clientTop||0);if(null==a.which&&(null!=a.charCode||null!=a.keyCode))a.which=null!=
a.charCode?a.charCode:a.keyCode;if(!a.metaKey&&a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&&a.button!==h)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},triggerEvent:function(a,c){var e=b.getData(a),d=c.type||c,g;if(e)g=e.handler;c="object"===typeof c?c[b.expando]?c:new b.Event(d,c):new b.Event(d);c.type=d;g&&g.call(a,c);c.result=h;c.target=a},one:function(a,c,e){b.addEvent(a,c,function(){b.removeEvent(a,c,arguments.callee);e.apply(this,arguments)})}});b.Event=function(a,c){a&&a.type?(this.originalEvent=
a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?n:o):this.type=a;c&&b.merge(this,c);this.timeStamp=(new Date).getTime();this[b.expando]=!0};b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var a=this.originalEvent;if(a)a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=n;var a=this.originalEvent;if(a)a.stopPropagation&&a.stopPropagation(),a.cancelBubble=
!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n;this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o};b.Event.props="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");
var m;m||(m={});(function(){var a=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if("function"!==typeof m.parse)m.parse=function(b,e){function d(a,b){var c,g,f=a[b];if(f&&"object"===typeof f)for(c in f)Object.prototype.hasOwnProperty.call(f,c)&&(g=d(f,c),g!==h?f[c]=g:delete f[c]);return e.call(a,b,f)}var g,b=""+b;a.lastIndex=0;a.test(b)&&(b=b.replace(a,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return g=eval("("+b+")"),"function"===typeof e?d({"":g},""):g;throw new SyntaxError("JSON.parse");}})();b.Player=b.Component.extend({init:function(a,c,e){this.tag=a;var d=this.el=b.createElement("div"),g=this.options={},f=g.width=a.getAttribute("width"),i=g.height=a.getAttribute("height"),f=f||300,i=i||150;a.player=d.player=this;this.ready(e);a.parentNode.insertBefore(d,a);d.appendChild(a);
d.id=this.id=a.id;d.className=a.className;a.id+="_html5_api";a.className="vjs-tech";b.players[d.id]=this;d.setAttribute("width",f);d.setAttribute("height",i);d.style.width=f+"px";d.style.height=i+"px";a.removeAttribute("width");a.removeAttribute("height");b.merge(g,b.options);b.merge(g,this.getVideoTagSettings());b.merge(g,c);a.removeAttribute("controls");a.removeAttribute("poster");if(a.hasChildNodes()){c=0;for(e=a.childNodes;c<e.length;c++)("SOURCE"==e[c].nodeName||"TRACK"==e[c].nodeName)&&a.removeChild(e[c])}this.techs=
{};this.values={};this.addClass("vjs-paused");this.addEvent("ended",this.onEnded);this.addEvent("play",this.onPlay);this.addEvent("pause",this.onPause);this.addEvent("error",this.onError);g.controls&&this.ready(function(){this.initComponents()});if(!g.sources||0==g.sources.length){c=0;for(e=g.techOrder;c<e.length;c++)if(a=e[c],b[a].isSupported()){this.loadTech(a);break}}else this.src(g.sources)},values:{},destroy:function(){this.stopTrackingProgress();this.stopTrackingCurrentTime();delete b.players[this.id]},
createElement:function(){},getVideoTagSettings:function(){var a={sources:[],tracks:[]};a.src=this.tag.getAttribute("src");a.controls=null!==this.tag.getAttribute("controls");a.poster=this.tag.getAttribute("poster");a.preload=this.tag.getAttribute("preload");a.autoplay=null!==this.tag.getAttribute("autoplay");a.loop=null!==this.tag.getAttribute("loop");a.muted=null!==this.tag.getAttribute("muted");if(this.tag.hasChildNodes())for(var c,e=0,d=this.tag.childNodes;e<d.length;e++)c=d[e],"SOURCE"==c.nodeName&&
a.sources.push({src:c.getAttribute("src"),type:c.getAttribute("type"),media:c.getAttribute("media"),title:c.getAttribute("title")}),"TRACK"==c.nodeName&&a.tracks.push(new b.Track({src:c.getAttribute("src"),kind:c.getAttribute("kind"),srclang:c.getAttribute("srclang"),label:c.getAttribute("label"),"default":null!==c.getAttribute("default"),title:c.getAttribute("title")},this));return a},loadTech:function(a,c){if(this.tech)this.unloadTech();else if("html5"!=a&&this.tag)this.el.removeChild(this.tag),
this.tag=!1;this.techName=a;this.isReady=!1;var e=b.merge({source:c,parentEl:this.el},this.options[a]);if(c){if(c.src==this.values.src&&0<this.values.currentTime)e.startTime=this.values.currentTime;this.values.src=c.src}this.tech=new b[a](this,e);this.tech.ready(function(){this.player.triggerReady();this.support.progressEvent||this.player.manualProgressOn();this.support.timeupdateEvent||this.player.manualTimeUpdatesOn()})},unloadTech:function(){this.tech.destroy();this.manualProgress&&this.manualProgressOff();
this.manualTimeUpdates&&this.manualTimeUpdatesOff();this.tech=!1},manualProgressOn:function(){this.manualProgress=!0;this.trackProgress();this.tech.addEvent("progress",function(){this.removeEvent("progress",arguments.callee);this.support.progressEvent=!0;this.player.manualProgressOff()})},manualProgressOff:function(){this.manualProgress=!1;this.stopTrackingProgress()},trackProgress:function(){this.progressInterval=setInterval(b.proxy(this,function(){this.values.bufferEnd<this.buffered().end(0)?this.triggerEvent("progress"):
1==this.bufferedPercent()&&(this.stopTrackingProgress(),this.triggerEvent("progress"))}),500)},stopTrackingProgress:function(){clearInterval(this.progressInterval)},manualTimeUpdatesOn:function(){this.manualTimeUpdates=!0;this.addEvent("play",this.trackCurrentTime);this.addEvent("pause",this.stopTrackingCurrentTime);this.tech.addEvent("timeupdate",function(){this.removeEvent("timeupdate",arguments.callee);this.support.timeupdateEvent=!0;this.player.manualTimeUpdatesOff()})},manualTimeUpdatesOff:function(){this.manualTimeUpdates=
!1;this.stopTrackingCurrentTime();this.removeEvent("play",this.trackCurrentTime);this.removeEvent("pause",this.stopTrackingCurrentTime)},trackCurrentTime:function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=setInterval(b.proxy(this,function(){this.triggerEvent("timeupdate")}),250)},stopTrackingCurrentTime:function(){clearInterval(this.currentTimeInterval)},onEnded:function(){this.options.loop?(this.currentTime(0),this.play()):(this.pause(),this.currentTime(0),
this.pause())},onPlay:function(){b.removeClass(this.el,"vjs-paused");b.addClass(this.el,"vjs-playing")},onPause:function(){b.removeClass(this.el,"vjs-playing");b.addClass(this.el,"vjs-paused")},onError:function(a){b.log("Video Error",a)},apiCall:function(a,c){if(this.isReady)return this.tech[a](c);b.log("The playback technology API is not ready yet. Use player.ready(myFunction). ["+a+"]",arguments.callee.caller.arguments.callee.caller.arguments.callee.caller);return!1},play:function(){this.apiCall("play");
return this},pause:function(){this.apiCall("pause");return this},paused:function(){return this.apiCall("paused")},currentTime:function(a){return a!==h?(this.values.lastSetCurrentTime=a,this.apiCall("setCurrentTime",a),this.manualTimeUpdates&&this.triggerEvent("timeupdate"),this):this.values.currentTime=this.apiCall("currentTime")},duration:function(){return this.apiCall("duration")},remainingTime:function(){return this.duration()-this.currentTime()},buffered:function(){var a=this.apiCall("buffered"),
c=this.values.bufferEnd=this.values.bufferEnd||0;if(a&&0<a.length&&a.end(0)!==c)c=a.end(0),this.values.bufferEnd=c;return b.createTimeRange(0,c)},bufferedPercent:function(){return this.duration()?this.buffered().end(0)/this.duration():0},volume:function(a){return a!==h?(a=Math.max(0,Math.min(1,parseFloat(a))),this.values.volume=a,this.apiCall("setVolume",a),b.setLocalStorage("volume",a),this):this.apiCall("volume")},muted:function(a){return a!==h?(this.apiCall("setMuted",a),this):this.apiCall("muted")},
width:function(a,b){return a!==h?(this.el.width=a,this.el.style.width=a+"px",b||this.triggerEvent("resize"),this):parseInt(this.el.getAttribute("width"))},height:function(a){return a!==h?(this.el.height=a,this.el.style.height=a+"px",this.triggerEvent("resize"),this):parseInt(this.el.getAttribute("height"))},size:function(a,b){return this.width(a,!0).height(b)},supportsFullScreen:function(){return this.apiCall("supportsFullScreen")},requestFullScreen:function(){var a=b.support.requestFullScreen;this.isFullScreen=
!0;a?(!1===this.tech.support.fullscreenResize&&!0!=this.options.flash.iFrameMode&&(this.pause(),this.unloadTech(),b.addEvent(f,a.eventName,this.proxy(function(){b.removeEvent(f,a.eventName,arguments.callee);this.loadTech(this.techName,{src:this.values.src})}))),this.el[a.requestFn](),b.addEvent(f,a.eventName,this.proxy(function(){this.isFullScreen=f[a.isFullScreen]}))):this.tech.supportsFullScreen()?this.apiCall("enterFullScreen"):this.enterFullWindow();this.triggerEvent("fullscreenchange");var c=
f.getElementById("videoDiv").offsetTop-f.body.scrollTop;processor.enterFullScreen(8,c);return this},cancelFullScreen:function(){var a=b.support.requestFullScreen;a?(!1===this.tech.support.fullscreenResize&&!0!=this.options.flash.iFrameMode&&(this.pause(),this.unloadTech(),b.addEvent(f,a.eventName,this.proxy(function(){b.removeEvent(f,a.eventName,arguments.callee);this.loadTech(this.techName,{src:this.values.src})}))),f[a.cancelFn]()):this.tech.supportsFullScreen()?this.apiCall("exitFullScreen"):this.exitFullWindow();
this.isFullScreen=!1;this.triggerEvent("fullscreenchange");processor.exitFullScreen();return this},enterFullWindow:function(){this.isFullWindow=!0;this.docOrigOverflow=f.documentElement.style.overflow;b.addEvent(f,"keydown",b.proxy(this,this.fullWindowOnEscKey));f.documentElement.style.overflow="hidden";b.addClass(f.body,"vjs-full-window");b.addClass(this.el,"vjs-fullscreen");this.triggerEvent("enterFullWindow")},fullWindowOnEscKey:function(a){27==a.keyCode&&(!0==this.isFullScreen?this.cancelFullScreen():
this.exitFullWindow())},exitFullWindow:function(){this.isFullWindow=!1;b.removeEvent(f,"keydown",this.fullWindowOnEscKey);f.documentElement.style.overflow=this.docOrigOverflow;b.removeClass(f.body,"vjs-full-window");b.removeClass(this.el,"vjs-fullscreen");this.triggerEvent("exitFullWindow");processor.exitFullScreen()},src:function(a){if(a instanceof Array){var c=a,e=0,d=this.options.techOrder;a:for(;e<d.length;e++){var g=d[e],f=b[g];if(f.isSupported())for(var i=0,h=c;i<h.length;i++)if(a=h[i],f.canPlaySource.call(this,
a)){g==this.techName?this.src(a):this.loadTech(g,a);break a}}}else a instanceof Object?b[this.techName].canPlaySource(a)?this.src(a.src):this.src([a]):(this.values.src=a,this.isReady?(this.apiCall("src",a),"auto"==this.options.preload&&this.load(),this.options.autoplay&&this.play()):this.ready(function(){this.src(a)}));return this},load:function(){this.apiCall("load");return this},currentSrc:function(){return this.apiCall("currentSrc")},textTrackValue:function(a,b){return b!==h?(this.values[a]=b,
this.triggerEvent(a+"update"),this):this.values[a]},preload:function(a){return a!==h?(this.apiCall("setPreload",a),this.options.preload=a,this):this.apiCall("preload",a)},autoplay:function(a){return a!==h?(this.apiCall("setAutoplay",a),this.options.autoplay=a,this):this.apiCall("autoplay",a)},loop:function(a){return a!==h?(this.apiCall("setLoop",a),this.options.loop=a,this):this.apiCall("loop",a)},controls:function(){return this.options.controls},textTracks:function(){return this.options.tracks},
poster:function(){return this.apiCall("poster")},error:function(){return this.apiCall("error")},networkState:function(){return this.apiCall("networkState")},readyState:function(){return this.apiCall("readyState")},seeking:function(){return this.apiCall("seeking")},initialTime:function(){return this.apiCall("initialTime")},startOffsetTime:function(){return this.apiCall("startOffsetTime")},played:function(){return this.apiCall("played")},seekable:function(){return this.apiCall("seekable")},ended:function(){return this.apiCall("ended")},
videoTracks:function(){return this.apiCall("videoTracks")},audioTracks:function(){return this.apiCall("audioTracks")},videoWidth:function(){return this.apiCall("videoWidth")},videoHeight:function(){return this.apiCall("videoHeight")},defaultPlaybackRate:function(){return this.apiCall("defaultPlaybackRate")},playbackRate:function(){return this.apiCall("playbackRate")},controls:function(){return this.apiCall("controls")},defaultMuted:function(){return this.apiCall("defaultMuted")}});(function(){var a,
c,e,d;f.cancelFullscreen!==h?(a="requestFullscreen",c="exitFullscreen",e="fullscreenchange",d="fullScreen"):b.each(["moz","webkit"],function(g){if(("moz"!=g||f.mozFullScreenEnabled)&&f[g+"CancelFullScreen"]!==h)a=g+"RequestFullScreen",c=g+"CancelFullScreen",e=g+"fullscreenchange","webkit"==g?d=g+"IsFullScreen":(b.log("moz here"),d=g+"FullScreen")});if(a)b.support.requestFullScreen={requestFn:a,cancelFn:c,eventName:e,isFullScreen:d}})();b.PlaybackTech=b.Component.extend({init:function(){},onClick:function(){this.player.options.controls&&
b.PlayToggle.prototype.onClick.call(this)}});b.apiMethods="play,pause,paused,currentTime,setCurrentTime,duration,buffered,volume,setVolume,muted,setMuted,width,height,supportsFullScreen,enterFullScreen,src,load,currentSrc,preload,setPreload,autoplay,setAutoplay,loop,setLoop,error,networkState,readyState,seeking,initialTime,startOffsetTime,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks,defaultPlaybackRate,playbackRate,mediaGroup,controller,controls,defaultMuted".split(",");
b.each(b.apiMethods,function(a){b.PlaybackTech.prototype[a]=function(){throw Error("The '"+method+"' method is not available on the playback technology's API");}});b.html5=b.PlaybackTech.extend({init:function(a,b,e){this.player=a;this.el=this.createElement();this.ready(e);this.addEvent("click",this.proxy(this.onClick));if((b=b.source)&&this.el.currentSrc==b.src)a.triggerEvent("loadstart");else if(b)this.el.src=b.src;a.ready(function(){if(this.options.autoplay&&this.paused())this.tag.poster=null,this.play()});
this.setupTriggers();this.triggerReady()},destroy:function(){this.player.tag=!1;this.removeTriggers();this.el.parentNode.removeChild(this.el)},createElement:function(){var d;var a=this.player,c=a.tag,e;if(!c||!1===this.support.movingElementInDOM)c&&a.el.removeChild(c),d=e=b.createElement("video",{id:c.id||a.el.id+"_html5_api",className:c.className||"vjs-tech"}),c=d,b.insertFirst(c,a.el);b.each(["autoplay","preload","loop","muted"],function(b){c[b]=a.options[b]},this);return c},setupTriggers:function(){b.each.call(this,
b.html5.events,function(a){b.addEvent(this.el,a,b.proxy(this.player,this.eventHandler))})},removeTriggers:function(){b.each.call(this,b.html5.events,function(a){b.removeEvent(this.el,a,b.proxy(this.player,this.eventHandler))})},eventHandler:function(a){a.stopPropagation();this.triggerEvent(a)},play:function(){this.el.play()},pause:function(){this.el.pause()},paused:function(){return this.el.paused},currentTime:function(){return this.el.currentTime},setCurrentTime:function(a){try{this.el.currentTime=
a}catch(c){b.log(c,"Video isn't ready. (VideoJS)")}},duration:function(){return this.el.duration||0},buffered:function(){return this.el.buffered},volume:function(){return this.el.volume},setVolume:function(a){this.el.volume=a},muted:function(){return this.el.muted},setMuted:function(a){this.el.muted=a},width:function(){return this.el.offsetWidth},height:function(){return this.el.offsetHeight},supportsFullScreen:function(){return"function"==typeof this.el.webkitEnterFullScreen&&!navigator.userAgent.match("Chrome")&&
!navigator.userAgent.match("Mac OS X 10.5")?!0:!1},enterFullScreen:function(){try{this.el.webkitEnterFullScreen()}catch(a){11==a.code&&b.log("VideoJS: Video not ready.")}},src:function(a){this.el.src=a},load:function(){this.el.load()},currentSrc:function(){return this.el.currentSrc},preload:function(){return this.el.preload},setPreload:function(a){this.el.preload=a},autoplay:function(){return this.el.autoplay},setAutoplay:function(a){this.el.autoplay=a},loop:function(){return this.el.loop},setLoop:function(a){this.el.loop=
a},error:function(){return this.el.error},seeking:function(){return this.el.seeking},ended:function(){return this.el.ended},controls:function(){return this.player.options.controls},defaultMuted:function(){return this.el.defaultMuted}});b.html5.isSupported=function(){return!!f.createElement("video").canPlayType};b.html5.canPlaySource=function(a){return!!f.createElement("video").canPlayType(a.type)};b.html5.events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(",");
b.html5.prototype.support={fullscreen:typeof b.testVid.webkitEnterFullScreen!==h?!b.ua.match("Chrome")&&!b.ua.match("Mac OS X 10.5")?!0:!1:!1,movingElementInDOM:!b.isIOS()};if(b.isAndroid()&&3>b.androidVersion())f.createElement("video").constructor.prototype.canPlayType=function(a){return a&&-1!=a.toLowerCase().indexOf("video/mp4")?"maybe":""};b.flash=b.PlaybackTech.extend({init:function(a,c){this.player=a;var e=c.source,d=c.parentEl,g=this.el=b.createElement("div",{id:d.id+"_temp_flash"}),f=a.el.id+
"_flash_api",i=a.options,h=b.merge({readyFunction:"_V_.flash.onReady",eventProxyFunction:"_V_.flash.onEvent",errorEventProxyFunction:"_V_.flash.onError",autoplay:i.autoplay,preload:i.preload,loop:i.loop,muted:i.muted},c.flashVars),j=b.merge({wmode:"opaque",bgcolor:"#000000"},c.params),k=b.merge({id:f,name:f,"class":"vjs-tech"},c.attributes);if(e)h.src=encodeURIComponent(e.src);b.insertFirst(g,d);c.startTime&&this.ready(function(){this.load();this.play();this.currentTime(c.startTime)});if(!0==c.iFrameMode&&
!b.isFF){var l=b.createElement("iframe",{id:f+"_iframe",name:f+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});h.readyFunction="ready";h.eventProxyFunction="events";h.errorEventProxyFunction="errors";b.addEvent(l,"load",b.proxy(this,function(){var a,d=l.contentWindow;a=l.contentDocument?l.contentDocument:l.contentWindow.document;a.write(b.flash.getEmbedCode(c.swf,h,j,k));d.player=this.player;d.ready=b.proxy(this.player,function(c){var c=a.getElementById(c),
d=this.tech;d.el=c;b.addEvent(c,"click",d.proxy(d.onClick));b.flash.checkReady(d)});d.events=b.proxy(this.player,function(a,b){this&&"flash"==this.techName&&this.triggerEvent(b)});d.errors=b.proxy(this.player,function(a,c){b.log("Flash Error",c)})}));g.parentNode.replaceChild(l,g)}else b.flash.embed(c.swf,g,h,j,k)},destroy:function(){this.el.parentNode.removeChild(this.el)},play:function(){this.el.vjs_play()},pause:function(){this.el.vjs_pause()},src:function(a){this.el.vjs_src(a);if(this.player.autoplay){var b=
this;setTimeout(function(){b.play()},0)}},load:function(){this.el.vjs_load()},poster:function(){this.el.vjs_getProperty("poster")},buffered:function(){return b.createTimeRange(0,this.el.vjs_getProperty("buffered"))},supportsFullScreen:function(){return!1},enterFullScreen:function(){return!1}});(function(){var a=b.flash.prototype,c="preload,currentTime,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),e="error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks".split(",");
"load,play,pause".split(",");createSetter=function(b){var c=b.charAt(0).toUpperCase()+b.slice(1);a["set"+c]=function(a){return this.el.vjs_setProperty(b,a)}};createGetter=function(b){a[b]=function(){return this.el.vjs_getProperty(b)}};b.each(c,function(a){createGetter(a);createSetter(a)});b.each(e,function(a){createGetter(a)})})();b.flash.isSupported=function(){return 10<=b.flash.version()[0]};b.flash.canPlaySource=function(a){if(a.type in b.flash.prototype.support.formats)return"maybe"};b.flash.prototype.support=
{formats:{"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},progressEvent:!1,timeupdateEvent:!1,fullscreenResize:!1,parentResize:!b.ua.match("Firefox")};b.flash.onReady=function(a){var a=b.el(a),c=a.player||a.parentNode.player,e=c.tech;a.player=c;e.el=a;e.addEvent("click",e.onClick);b.flash.checkReady(e)};b.flash.checkReady=function(a){a.el.vjs_getProperty?a.triggerReady():setTimeout(function(){b.flash.checkReady(a)},50)};b.flash.onEvent=function(a,c){b.el(a).player.triggerEvent(c)};
b.flash.onError=function(a,c){b.log("Flash Error",c,a)};b.flash.version=function(){var a="0,0,0";try{a=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(b){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(e){}}return a.split(",")};b.flash.embed=function(a,
c,e,d,g){a=b.flash.getEmbedCode(a,e,d,g);a=b.createElement("div",{innerHTML:a}).childNodes[0];e=c.parentNode;c.parentNode.replaceChild(a,c);if(b.isIE()){var f=e.childNodes[0];setTimeout(function(){f.style.display="block"},1E3)}return a};b.flash.getEmbedCode=function(a,c,e,d){var g="",f="";attrsString="";c&&b.eachProp(c,function(a,b){g+=a+"="+b+"&amp;"});e=b.merge({movie:a,flashvars:g,allowScriptAccess:"always",allowNetworking:"all"},e);b.eachProp(e,function(a,b){f+='<param name="'+a+'" value="'+b+
'" />'});d=b.merge({data:a,width:"100%",height:"100%"},d);b.eachProp(d,function(a,b){attrsString+=a+'="'+b+'" '});return'<object type="application/x-shockwave-flash"'+attrsString+">"+f+"</object>"};b.Track=function(a,c){this.player=c;this.src=a.src;this.kind=a.kind;this.srclang=a.srclang;this.label=a.label;this["default"]=a["default"];this.title=a.title;this.cues=[];this.currentCue=!1;this.lastCueIndex=0;c.addEvent("timeupdate",b.proxy(this,this.update));c.addEvent("ended",b.proxy(this,function(){this.lastCueIndex=
0}));b.get(a.src,b.proxy(this,this.parseCues))};b.Track.prototype={parseCues:function(a){for(var c,e=a.split("\n"),d="",f=0;f<e.length;f++)if(d=b.trim(e[f])){a={id:d,index:this.cues.length};d=b.trim(e[++f]);c=d.split(" --\> ");a.startTime=this.parseCueTime(c[0]);a.endTime=this.parseCueTime(c[1]);c=[];for(var h=f;h<e.length;h++){d=b.trim(e[++f]);if(!d)break;c.push(d)}a.text=c.join("<br/>");this.cues.push(a)}},parseCueTime:function(a){var b=a.split(":"),a=0+3600*parseFloat(b[0]),a=a+60*parseFloat(b[1]),
b=b[2].split(/\.|,/),a=a+parseFloat(b[0]);(ms=parseFloat(b[1]))&&(a+=ms/1E3);return a},update:function(){if(this.cues&&0<this.cues.length){var a=this.player.currentTime();if(!this.currentCue||this.currentCue.startTime>=a||this.currentCue.endTime<a){for(var b=!1,e=this.cues[this.lastCueIndex].startTime>a,d=this.lastCueIndex-(e?1:0);;)if(e){if(0>d||this.cues[d].endTime<a)break;if(this.cues[d].startTime<a){b=d;break}d--}else{if(d>=this.cues.length||this.cues[d].startTime>a)break;if(this.cues[d].endTime>
a){b=d;break}d++}if(!1!==b)this.currentCue=this.cues[b],this.lastCueIndex=b,this.updatePlayer(this.currentCue.text);else if(this.currentCue)this.currentCue=!1,this.updatePlayer("")}}},updatePlayer:function(a){this.player.textTrackValue(this.kind,a)}};b.addEvent(j,"load",function(){b.windowLoaded=!0});b.autoSetup();j.VideoJS=j._V_=k})(window);
